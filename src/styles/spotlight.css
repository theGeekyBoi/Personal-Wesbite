/* Cursor Spotlight Styles - lightweight and theme-aware */

:root {
  /* Radius controls the size of the spotlight (accepts px) */
  --spotlight-radius: 200px; /* default within requested 160â€“220px */
  /* Position updated via JS */
  --spotlight-x: 50%;
  --spotlight-y: 50%;
  /* Blend mode customizable per section/page via CSS var */
  --spotlight-blend: soft-light; /* e.g., overlay, multiply, normal */
  /* Opacity stops (tweak per section if needed) */
  --spotlight-o1: 0.18;
  --spotlight-o2: 0.12;
  --spotlight-o3: 0.08;
  --spotlight-o4: 0.04;
}

@media (prefers-reduced-motion: reduce) {
  .cursor-spotlight { display: none; }
}

.cursor-spotlight {
  position: fixed;
  inset: 0;
  z-index: 20; /* Above backgrounds, below tooltips/menus (z-50+) */
  pointer-events: none; /* Do not obstruct clicks/hover/focus */

  /* Smooth opacity transitions when toggling */
  transition: opacity 120ms ease-out;

  /* Fallback to normal blend if unsupported handled by @supports below */
  mix-blend-mode: var(--spotlight-blend, normal);

  /* High-quality gradient with proportional stops to avoid banding */
  background: radial-gradient(
    circle var(--spotlight-radius) at var(--spotlight-x) var(--spotlight-y),
    hsl(var(--foreground) / var(--spotlight-o1)) 0,
    hsl(var(--foreground) / var(--spotlight-o2)) calc(var(--spotlight-radius) * 0.45),
    hsl(var(--foreground) / var(--spotlight-o3)) calc(var(--spotlight-radius) * 0.75),
    hsl(var(--foreground) / var(--spotlight-o4)) var(--spotlight-radius),
    transparent calc(var(--spotlight-radius) * 1.2)
  );
  /* Ensure the gradient renders crisply and remains isolated for perf */
  will-change: background;
  contain: layout paint style;
}

/* Prefer soft-light when supported */
@supports (mix-blend-mode: soft-light) {
  .cursor-spotlight {
    mix-blend-mode: var(--spotlight-blend, soft-light);
  }
}

/* Light vs Dark adjustments
   Using theme tokens: foreground is light in dark mode and dark in light mode
   which keeps the effect a subtle luminance lift appropriate to theme. */
:root {
  /* In light mode, very subtle to avoid blowing out whites - slightly darker vignette via soft-light */
  --spotlight-blend: soft-light;
}

.dark {
  /* In dark mode, slightly stronger lift via higher opacities */
  --spotlight-o1: 0.22;
  --spotlight-o2: 0.16;
  --spotlight-o3: 0.10;
  --spotlight-o4: 0.05;
}

/* Allow per-section overrides: set --spotlight-blend on any ancestor
   e.g., section { --spotlight-blend: overlay; } */
